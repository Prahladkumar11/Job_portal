{% extends "base1.html" %}
{% load static %}
{% block title %}Job {% endblock %}

{% block content %}

  
  
  
  <!-- Start home -->
    <section class="bg-half page-next-level" style="background: url('{% static 'images/bg/bg1.jpg' %}') center center;"> 
        <div class="bg-overlay"></div>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="text-center text-white">
                        <h4 class="text-uppercase title mb-4">Job List view</h4>
                        <ul class="page-next d-inline-block mb-0">
                            <li><a href="{% url 'index' %}" class="text-uppercase font-weight-bold">Home</a></li>
                            <li><a href="#" class="text-uppercase font-weight-bold">Jobs</a></li> 
                            <li>
                                <span class="text-uppercase text-white font-weight-bold">Job Listing</span> 
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- end home -->

    <div class="container">
        <div class="home-form-position">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="home-registration-form job-list-reg-form bg-light shadow p-4 mb-3">
                        <form class="registration-form">
                            <div class="row">
                                <div class="col-lg-3 col-md-6">
                                    <div class="registration-form-box">
                                        <i class="fa fa-briefcase"></i>
                                        <input type="text" id="exampleInputName1" class="form-control rounded registration-input-box" placeholder="Job keybords...">
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6">
                                    <div class="registration-form-box">
                                        <i class="fa fa-location-arrow"></i>
                                        <select id="select-country" class="demo-default">
                                            <option value="">Location</option>
                                            {% for loc in job %}
                                                        <option value="{{loc.JobLocation}}">{{loc.JobLocation|title}}</option>
                                                        
                                                        {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6">
                                    <div class="registration-form-box">
                                        <i class="fa fa-list-alt"></i>
                                        <select id="select-category" class="demo-default">
                                            <option value="">Categories...</option>
                                            <option value="4">Accounting</option>
                                            <option value="1">IT & Software</option>
                                            <option value="3">Marketing</option>
                                            <option value="5">Banking</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6">
                                    <div class="registration-form-box">
                                        <input type="submit" id="submit" name="send" class="submitBnt btn btn-primary btn-block" value="Submit">
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JOB LIST START -->
    <section class="section pt-0">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-12">
                    <div class="section-title text-center mb-4 pb-2">
                        <h4 class="title title-line pb-5">Available job for you</h4>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-3">
                    <div class="left-sidebar">
                        <div class="accordion" id="accordionExample">
                            <div class="card rounded mt-4">
                                <a data-toggle="collapse" href="#collapseOne" class="job-list" aria-expanded="true" aria-controls="collapseOne">
                                    <div class="card-header" id="headingOne">
                                        <h6 class="mb-0 text-dark f-18">Date Posted</h6>
                                    </div>
                                </a>
                                <div id="collapseOne" class="collapse show" aria-labelledby="headingOne">
                                    <div class="card-body p-0">
                                        <div class="custom-control custom-radio">
                                            <input type="radio" id="customRadio1" name="customRadio" class="custom-control-input">
                                            <label class="custom-control-label ml-1 text-muted" for="customRadio1">Last Hour</label>
                                        </div>

                                        <div class="custom-control custom-radio">
                                            <input type="radio" id="customRadio2" name="customRadio" class="custom-control-input">
                                            <label class="custom-control-label ml-1 text-muted" for="customRadio2">Last 24 hours</label>
                                        </div>

                                        <div class="custom-control custom-radio">
                                            <input type="radio" id="customRadio3" name="customRadio" class="custom-control-input" value="7">
                                            <label class="custom-control-label ml-1 text-muted" for="customRadio3">Last 7 days</label>
                                        </div>

                                        <div class="custom-control custom-radio">
                                            <input type="radio" id="customRadio4" name="customRadio" class="custom-control-input"value="14">
                                            <label class="custom-control-label ml-1 text-muted" for="customRadio4">Last 14 days</label>
                                        </div>

                                        <div class="custom-control custom-radio">
                                            <input type="radio" id="customRadio5" name="customRadio" class="custom-control-input" value="24">
                                            <label class="custom-control-label ml-1 text-muted" for="customRadio5">Last 30 days</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- collapse one end -->
                            <div class="card rounded mt-4">
                                <a data-toggle="collapse" href="#collapsetwo" class="job-list" aria-expanded="true" aria-controls="collapsetwo">
                                    <div class="card-header" id="headingtwo">
                                        <h6 class="mb-0 text-dark f-18">Categories</h6>
                                    </div>
                                </a>
                                <div id="collapsetwo" class="collapse show" aria-labelledby="headingtwo">
                                    <div class="card-body p-0">
                                        <div class="custom-control custom-radio">
                                            <input type="radio" id="customRadio7" name="customRadio1" class="custom-control-input">
                                            <label class="custom-control-label ml-1 text-muted f-15" for="customRadio7">Digital & Creative</label>
                                        </div>

                                        <div class="custom-control custom-radio">
                                            <input type="radio" id="customRadio8" name="customRadio1" class="custom-control-input">
                                            <label class="custom-control-label ml-1 text-muted f-15" for="customRadio8">Accountancy</label>
                                        </div>

                                        <div class="custom-control custom-radio">
                                            <input type="radio" id="customRadio9" name="customRadio1" class="custom-control-input">
                                            <label class="custom-control-label ml-1 text-muted f-15" for="customRadio9">Banking</label>
                                        </div>

                                        <div class="custom-control custom-radio">
                                            <input type="radio" id="customRadio10" name="customRadio1" class="custom-control-input">
                                            <label class="custom-control-label ml-1 text-muted f-15" for="customRadio10">IT Contractor</label>
                                        </div>

                                        <div class="custom-control custom-radio">
                                            <input type="radio" id="customRadio11" name="customRadio1" class="custom-control-input">
                                            <label class="custom-control-label ml-1 text-muted f-15" for="customRadio11">Graduate</label>
                                        </div>

                                        <div class="custom-control custom-radio">
                                            <input type="radio" id="customRadio12" name="customRadio1" class="custom-control-input">
                                            <label class="custom-control-label ml-1 text-muted f-15" for="customRadio12">Estate Agency</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- collapse one end -->
                            <div class="card rounded mt-4">
                                <a data-toggle="collapse" href="#collapsethree" class="job-list" aria-expanded="true" aria-controls="collapsethree">
                                    <div class="card-header" id="headingthree">
                                        <h6 class="mb-0 text-dark f-18">Experince</h6>
                                    </div>
                                </a>
                                <div id="collapsethree" class="collapse show" aria-labelledby="headingthree">
                                    <div class="card-body p-0">
                                        <div class="custom-control custom-radio">
                                            <input type="radio" id="customRadio13" name="customRadio2" class="custom-control-input">
                                            <label class="custom-control-label ml-1 text-muted f-15" for="customRadio13">1Year to 2Year</label>
                                        </div>

                                        <div class="custom-control custom-radio">
                                            <input type="radio" id="customRadio14" name="customRadio2" class="custom-control-input">
                                            <label class="custom-control-label ml-1 text-muted f-15" for="customRadio14">2Year to 3Year</label>
                                        </div>

                                        <div class="custom-control custom-radio">
                                            <input type="radio" id="customRadio15" name="customRadio2" class="custom-control-input">
                                            <label class="custom-control-label ml-1 text-muted f-15" for="customRadio15">3Year to 4Year</label>
                                        </div>

                                        <div class="custom-control custom-radio">
                                            <input type="radio" id="customRadio16" name="customRadio2" class="custom-control-input">
                                            <label class="custom-control-label ml-1 text-muted f-15" for="customRadio16">IT Contractor</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- collapse one end -->
                            <div class="card rounded mt-4">
                                <a data-toggle="collapse" href="#collapsefour" class="job-list" aria-expanded="true" aria-controls="collapsefour">
                                    <div class="card-header" id="headingfour">
                                        <h6 class="mb-0 text-dark f-18">Gender</h6>
                                    </div>
                                </a>
                                <div id="collapsefour" class="collapse show" aria-labelledby="headingfour">
                                    <div class="card-body p-0">
                                        <div class="custom-control custom-radio">
                                            <input type="radio" id="customRadio17" name="customRadio3" class="custom-control-input">
                                            <label class="custom-control-label ml-1 text-muted f-15" for="customRadio17">Male</label>
                                        </div>

                                        <div class="custom-control custom-radio">
                                            <input type="radio" id="customRadio18" name="customRadio3" class="custom-control-input">
                                            <label class="custom-control-label ml-1 text-muted f-15" for="customRadio18">Female</label>
                                        </div>

                                        <div class="custom-control custom-radio">
                                            <input type="radio" id="customRadio19" name="customRadio3" class="custom-control-input">
                                            <label class="custom-control-label ml-1 text-muted f-15" for="customRadio19">Others</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- collapse one end -->
                        </div>
                    </div>
                </div>

                <div class="col-lg-9 mt-4 pt-2">
                    <div class="row align-items-center">
                        <div class="col-lg-12">
                            <div class="show-results">
                                <div class="float-left">
                                    <h5 class="text-dark mb-0 pt-2 f-18">Showing results 0-20</h5>
                                </div>
                                <div class="sort-button float-right">
                                    <select class="nice-select rounded" id="jobTitleFilter">
                                        <option data-display="Select">Nothing</option>

                                        {% for option in joblist %}

                                        <option value="{{ option.JobTitle }}">{{ option.JobTitle }}</option>
                                        
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        {% if joblist %}
                        {% for job in joblist %}
                        
                        <div class="col-lg-12 mt-4 pt-2 job-list-item" data-jobtitle="{{ job.JobTitle }}" data-postDate{{forloop.counter}}="0">
                            <div class="job-list-box border rounded">
                                <div class="p-3">
                                    <div class="row align-items-center">
                                        <div class="col-lg-2">
                                            <div class="company-logo-img">
                                                <a href="{% url 'jobdetail' job.id %}">
                                                <img src="{{job.Company_id.logo_pic.url}}" alt="" class="img-fluid mx-auto d-block" max-width="50%">
                                            </a>
                                            </div>
                                        </div>
                                        <div class="col-lg-7 col-md-9">
                                            <div class="job-list-desc">
                                                <h6 class="mb-2"><a href="{% url 'jobdetail' job.id %}" class="text-dark">
                                                {{job.JobTitle}}    
                                                </a></h6>
                                                <p class="text-muted mb-0"><i class="mdi mdi-bank mr-2"></i>
                                                    
                                                    {{job.Company_id.CompanyName}}
                                                    
                                                    </p>
                                                <ul class="list-inline mb-0">
                                                    <li class="list-inline-item mr-3">
                                                        <p class="text-muted mb-0"><i class="mdi mdi-map-marker mr-2"></i> {{job.JobLocation}}</p>
                                                    </li>
                                                    
                                                    <li class="list-inline-item">
                                                        <p class="text-muted mb-0"  id="PostDay_{{ forloop.counter }}"><i class="mdi mdi-clock-outline mr-2"></i>1 min ago</p>
                                                    </li>
                                                    <script>
                                                        var postDate{{ forloop.counter }} = new Date("{{ job.PostDate|date:'Y-m-d' }}");
                                                        var currDate{{ forloop.counter }} = new Date("{{ CurDate|date:'Y-m-d' }}");
                                                        
                                                        // Calculate the difference in milliseconds
                                                        var timeDifference{{ forloop.counter }} = currDate{{ forloop.counter }} - postDate{{ forloop.counter }};
                                                        
                                                        // Convert milliseconds to days
                                                        var days{{ forloop.counter }} = timeDifference{{ forloop.counter }} / (1000 * 60 * 60 * 24);
                                                        console.log(days{{forloop.counter}})
                                                        
                                                        
                                                        document.getElementById("PostDay_{{ forloop.counter }}").innerHTML = days{{ forloop.counter }} + " days ago";
                                                        var postDateElement = document.querySelector('.job-list-item[data-postdate="{{ forloop.counter }}"]');
                                                        if (postDateElement) {
                                                            console.log('he')
                                                            postDateElement.setAttribute('data-postdate{{ forloop.counter }}', days{{ forloop.counter }});
                                                        }
                                                                                                                
                                                        
                                                    </script>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="col-lg-3 col-md-3">
                                            <div class="job-list-button-sm text-right">
                                                <span class="badge badge-success"> {{job.JobType}}</span>

                                                <div class="mt-3">
                                                    <a href="{% url 'apply' job.id %}" class="btn btn-sm btn-primary">Apply</a>
                                                </div>
                                                
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                        {% endif %}
                        
 
                    </div>
                    <div class="col-lg-12 mt-4 pt-2">
                        <nav aria-label="Page navigation example">
                            <ul class="pagination job-pagination mb-0 justify-content-center">
                                {% if joblist.has_previous %}
                                <li class="page-item ">
                                    <a class="page-link" href="?page={{ joblist.previous_page_number }}" tabindex="-1" aria-disabled="true">
                                        <i class="mdi mdi-chevron-double-left"></i>
                                    </a>
                                </li>

                                {% else %}
                                <li class="page-item disabled ">
                                    <a class="page-link" href="?page=" tabindex="-1" aria-disabled="true">
                                        <i class="mdi mdi-chevron-double-left"></i>
                                    </a>
                                </li>

                                {% endif %}

                                {% for num in joblist.paginator.page_range %}

                                <li class="page-item {% if joblist.number == num %}active{% endif %}">
                                    <a class="page-link" href="?page={{ num }}">{{num}}</a>
                                </li>
                                {% endfor %}

                                {% if joblist.has_next %}
                                <li class="page-item">
                                    <a class="page-link" href="?page={{ joblist.next_page_number }}">
                                        <i class="mdi mdi-chevron-double-right"></i>
                                    </a>
                                </li>

                                {% else %}
                                <li class="page-item disabled ">
                                    <a class="page-link" href="?page=" tabindex="-1" aria-disabled="true">
                                        <i class="mdi mdi-chevron-double-right"></i>
                                    </a>
                                </li>

                                
                                {% endif %}
                            </ul>
                        </nav>
                    </div>
                    
                </div>
            </div>
        </div>
    </section>
    <!-- JOB LIST START -->





<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function() {
    $('#jobTitleFilter').on('change', function() {
        var selectedJobTitle = $(this).val();
        
        if (selectedJobTitle === 'Nothing') {
            $('.job-list-item').show(); // Show all job list items if "Nothing" is selected
        } else {
            $('.job-list-item').hide(); // Hide all job list items
            $('.job-list-item[data-jobtitle="' + selectedJobTitle + '"]').show(); // Show the selected job
        }
    });
});
const datepost = document.querySelectorAll('input[name="customRadio"]');

datepost.forEach((radio) => {
    radio.addEventListener('change', () => 
    {
        if (radio.checked) 
        {
            if(radio.value=="male")
            {
                document.getElementById("a").innerHTML = radio.value; 

            }
            else
            {
                document.getElementById("a").innerHTML = radio.value; 
            }           
        }
        else
        {

        }
    });
});
</script>



    {% endblock %}